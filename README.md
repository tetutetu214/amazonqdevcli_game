# GOGO囲碁 要件定義書

## 概要
「GOGO囲碁」は、初心者でも陣地の概念を視覚的に理解できる囲碁ゲームです。石を置くと自分の陣地が色分けされ、どこが良い手かが一目で分かります。

## 機能要件

### ゲームモード
- プレイヤー vs AI（1対1）
- AI強度：囲碁検定5級レベル（初級）（今後3段階実装予定：5級（初級）、3級（中級）、1級（上級））
- 盤面：9×9マス
- コミ：白に+3.5目のハンディ

### 陣地表示システム

#### プレイヤー（黒石）
- **確定陣地**：青色（半透明）- 完全に自分の石で囲まれた領域
- **影響圏**：水色（半透明）- 自分の石から1〜2マス以内の空点

#### AI（白石）
- **確定陣地**：赤色（半透明）- 完全に自分の石で囲まれた領域  
- **影響圏**：ピンク色（半透明）- 自分の石から1〜2マス以内の空点
- **重複領域**：グレー色（半透明）- プレイヤーとAIの影響圏が重なる争点

### プレビュー機能
- マウスホバー時：薄い黒石を表示
- 石を置いた場合の陣地変化を即座にプレビュー表示
- 影響圏の面積変化で良い手かどうかが視覚的に判断可能

### 得点システム
- **得点 = 取った相手の石の数 + 自分の陣地の交点数**
- リアルタイムで得点表示・更新
- 取った石は相手の陣地に埋める方式（日本ルール準拠）

### 禁手ガイド機能
- 禁手になる場所をクリックした場合、ポップアップでガイド表示
- 「自殺手です」「コウのルールで置けません」等の説明
- 初心者が囲碁のルールを理解できるようサポート

## ゲームフローと状態遷移

### 画面構成
- **タイトル画面** ↔ **ゲーム画面** ↔ **勝敗判定画面**

### タイトル画面
- ゲームタイトル「GOGO囲碁」表示
- ゲーム説明
- スタートボタン
- **用語集**（画面下部）：
  - 「確定陣地」：完全に囲まれた自分の領域
  - 「影響圏」：将来的に自分の陣地になりそうな領域

### ゲーム画面
- **左エリア**：プレイヤー情報
  - 取った白石の数
  - 現在の陣地ポイント
  - 合計得点
- **中央エリア**：9×9の囲碁盤面
  - 石の配置（黒・白）
  - 陣地の色分け表示（半透明オーバーレイ）
  - プレビュー表示
- **右エリア**：AI情報
  - 取った黒石の数
  - 現在の陣地ポイント
  - 合計得点
  - **AI思考中表示**：「AI思考中…」テキスト
- **下部**：パスボタン、投了ボタン（横並び）

### 手番管理
- **手番表示は不要**：AIが即座に応手するため、常にプレイヤーのターンであることが明確
- プレイヤーが石を置く → AI が即座に応手（思考中表示） → プレイヤーのターンに戻る

### ゲーム終了条件
1. **投了**：投了ボタンクリック → 勝敗判定画面
2. **パス×2**：プレイヤーとAIが連続でパス → 勝敗判定画面

### 勝敗判定画面
- **最終得点表示**：
  - プレイヤー（黒）：取った石数 + 陣地数 = 合計点
  - AI（白）：取った石数 + 陣地数 + コミ3.5 = 合計点
- **勝敗結果表示**：勝利/敗北/引き分け
- **もう一度プレイボタン**：ゲーム画面に戻る

## 操作方法
- **マウスクリック**：石を配置
- **マウスホバー**：プレビュー表示
- **パスボタン**：手番をスキップ
- **投了ボタン**：ゲーム終了

## UI/UXテーマ
- **タイトル画面**：水墨画調デザイン（和風・墨絵風）
- **ゲーム画面背景**：畳風テクスチャ
- **盤面**：木目調（碁盤らしい木の質感）
- **全体的な色調**：落ち着いた和風カラー

## 技術仕様

### 開発環境
- **言語**：Python
- **フレームワーク**：pygame
- **画面サイズ**：1200×700ピクセル

### AI強度の詳細定義（囲碁検定5級レベル）
- **基本手筋の理解**：シチョウ、ゲタ、オイオトシなどの基本パターンを認識
- **簡単な死活判定**：2眼作り、欠け眼、中手などの基礎的生死判定が可能
- **アタリの確実な処理**：1手で取れる石は必ず取る
- **2〜3手先の読み**：複雑な深読みはしないが基本的な先読みを実行
- **序盤の基本理解**：2線より3線の価値を理解し、効率的な石の配置を心がける

### 主要アルゴリズム
- 陣地計算：BFS/DFSベース
- 影響圏計算：石からの距離ベース（1〜2マス）
- AI思考：上記定義に基づく囲碁検定5級レベル
- 禁手判定：自殺手・コウのチェック

### パフォーマンス要件
- **AI思考時間**：0.5秒以内
- **プレビュー表示**：0.1秒以内（リアルタイム性維持）
- **陣地計算更新**：石配置後即座に反映

### 互換性要件
- **Python要件**：Python 3.12.3 以上
- **pygame要件**：pygame 2.5.2 以上

## 実装優先度
1. 基本的な盤面表示・石配置
2. 陣地・影響圏の色分け表示
3. プレビュー機能
4. 得点計算・表示
5. パス機能・ゲーム終了処理
6. AI思考中表示
7. 禁手ガイド機能
8. AI実装（囲碁検定5級レベル）
9. UI/UXの洗練化

## 将来的な実装予定
- **音響要素**：石を置く音、陣地変化音、ゲーム終了音、BGM等（実装後追加予定）
- **AI強度拡張**：中級（3級）・上級（1級）レベルの追加
- **設定画面**：音量調整、AI強度選択、陣地表示ON/OFF切替等
- **アニメーション**：石配置時、陣地変化時の視覚効果
- **対局振り返り機能**：簡易棋譜表示、良手・悪手の解説表示（学習支援機能）