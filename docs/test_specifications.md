# GOGO囲碁 テスト仕様書

## 1. テスト概要

このドキュメントでは、GOGO囲碁アプリケーションのテスト仕様について説明します。テストは主にユニットテストを中心に構成されており、各コンポーネントの機能が正しく動作することを確認します。

## 2. テスト環境

- Python 3.8以上
- unittest フレームワーク
- pygame 2.0.0以上

## 3. テスト対象コンポーネント

- Board: 盤面と石の配置ロジック
- AI: AI対戦ロジック
- UI: ユーザーインターフェース
- Game: ゲームの状態管理
- Life_Death: 死活判定ロジック

## 4. テスト項目

### 4.1 Boardクラステスト

- **初期化テスト**: 盤面が正しく初期化されることを確認
- **石の配置テスト**: 石が正しく配置されることを確認
- **石の取り上げテスト**: 囲まれた石が正しく取り上げられることを確認
- **自殺手禁止テスト**: 自殺手が禁止されることを確認
- **コウ禁止テスト**: コウが禁止されることを確認
- **陣地計算テスト**: 陣地が正しく計算されることを確認
- **スコア計算テスト**: スコアが正しく計算されることを確認
- **盤面リセットテスト**: 盤面が正しくリセットされることを確認

### 4.2 AIクラステスト

- **手の選択テスト**: AIが有効な手を選択することを確認
- **パステスト**: 適切な状況でAIがパスすることを確認
- **石の取り上げ優先テスト**: AIが石を取れる手を優先することを確認
- **自分の石を守るテスト**: AIが自分の石を守る手を選択することを確認

### 4.3 UIクラステスト

- **画面描画テスト**: 各画面が正しく描画されることを確認
- **ボタンクリックテスト**: ボタンクリックが正しく検出されることを確認
- **盤面座標変換テスト**: 画面座標から盤面座標への変換が正しく行われることを確認
- **陣地表示テスト**: 陣地が正しく表示されることを確認
- **メッセージ表示テスト**: ポップアップメッセージが正しく表示されることを確認

### 4.4 Gameクラステスト

- **初期化テスト**: ゲームが正しく初期化されることを確認
- **タイトル画面イベント処理テスト**: タイトル画面でのイベント処理が正しく行われることを確認
- **ゲーム画面イベント処理テスト**: ゲーム画面でのイベント処理が正しく行われることを確認
- **結果画面イベント処理テスト**: 結果画面でのイベント処理が正しく行われることを確認
- **AI手処理テスト**: AIの手が正しく処理されることを確認
- **ゲーム終了条件テスト**: ゲーム終了条件が正しく判定されることを確認
- **ゲームリセットテスト**: ゲームが正しくリセットされることを確認

### 4.5 Life_Deathクラステスト

- **グループ検出テスト**: 石のグループが正しく検出されることを確認
- **呼吸点計算テスト**: 呼吸点が正しく計算されることを確認
- **死活判定テスト**: 石の死活が正しく判定されることを確認

## 5. 重要なテストケース

### 5.1 連続パスによるゲーム終了テスト

**目的**: 連続で2回パスが行われた場合にゲームが正しく終了することを確認する

**テスト手順**:
1. プレイヤーがパスする
2. AIがパスする
3. ゲームの状態が結果画面に遷移することを確認
4. 勝敗が正しく判定されることを確認

**期待結果**:
- 連続パス後、ゲームの状態が `Game.STATE_RESULT` に変わる
- 黒と白のスコアに基づいて勝者が正しく設定される

### 5.2 投了によるゲーム終了テスト

**目的**: プレイヤーが投了した場合にゲームが正しく終了することを確認する

**テスト手順**:
1. プレイヤーが投了ボタンをクリックする
2. ゲームの状態が結果画面に遷移することを確認
3. AIが勝者として設定されることを確認

**期待結果**:
- 投了後、ゲームの状態が `Game.STATE_RESULT` に変わる
- プレイヤーが黒の場合は白が勝者、プレイヤーが白の場合は黒が勝者として設定される

### 5.3 陣地計算テスト

**目的**: 陣地が正しく計算されることを確認する

**テスト手順**:
1. 特定のパターンの盤面を設定する
2. 陣地を計算する
3. 期待される陣地と一致することを確認する

**期待結果**:
- 黒と白の確定陣地が正しく計算される
- 黒と白の影響圏が正しく計算される

## 6. テスト実行方法

```bash
# すべてのテストを実行
python -m unittest discover tests

# 特定のテストファイルを実行
python -m unittest tests/test_game.py

# 特定のテストクラスを実行
python -m unittest tests.test_game.TestGame

# 特定のテストメソッドを実行
python -m unittest tests.test_game.TestGame.test_check_game_end
```

## 7. テスト結果の判定基準

- すべてのテストがパスすること
- テストカバレッジが80%以上であること
- 重要な機能（特に連続パスによるゲーム終了など）のテストが含まれていること
